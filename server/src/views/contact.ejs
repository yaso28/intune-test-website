<h1>お問い合わせフォーム</h1>

<div class="info-box">
    <p>ご質問やご要望がございましたら、以下のフォームからお気軽にお問い合わせください。</p>
</div>

<!-- エラーメッセージの表示 -->
<% if (typeof errors !== 'undefined' && errors.length > 0) { %>
    <div class="error-box">
        <h3>入力エラーがあります：</h3>
        <ul>
            <% errors.forEach(function(error) { %>
                <li><%= error.msg %></li>
            <% }); %>
        </ul>
    </div>
<% } %>

<!-- 成功メッセージの表示 -->
<% if (typeof success !== 'undefined' && success) { %>
    <div class="success-box">
        <p>お問い合わせありがとうございました！内容を確認後、ご連絡いたします。</p>
    </div>
<% } %>

<form id="contactForm" method="POST" action="/page/contact">
    <div class="form-group">
        <label for="name">お名前 <span class="required">*</span></label>
        <input 
            type="text" 
            id="name" 
            name="name" 
            value="<%= typeof formData !== 'undefined' ? formData.name || '' : '' %>" 
            placeholder="山田太郎"
            maxlength="50"
        >
        <small class="form-help">お名前を入力してください（50文字以内）</small>
    </div>

    <div class="form-group">
        <label for="email">メールアドレス <span class="required">*</span></label>
        <input 
            type="email" 
            id="email" 
            name="email" 
            value="<%= typeof formData !== 'undefined' ? formData.email || '' : '' %>" 
            placeholder="example@email.com"
        >
        <small class="form-help">有効なメールアドレスを入力してください</small>
    </div>

    <div class="form-group">
        <label for="message">メッセージ</label>
        <textarea 
            id="message" 
            name="message" 
            rows="5" 
            placeholder="ご質問やご要望をお聞かせください..."
            maxlength="500"
        ><%= typeof formData !== 'undefined' ? formData.message || '' : '' %></textarea>
        <small class="form-help">メッセージは500文字以内で入力してください（任意）</small>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">送信</button>
        <button type="reset" class="btn btn-secondary">リセット</button>
    </div>
</form>

<div class="time">
    送信日時: <%= new Date().toLocaleString('ja-JP') %>
</div>

<style>
    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #333;
    }

    .required {
        color: #e74c3c;
    }

    input[type="text"],
    input[type="email"],
    textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        box-sizing: border-box;
        transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    input[type="email"]:focus,
    textarea:focus {
        outline: none;
        border-color: #007bff;
        box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }

    .form-help {
        display: block;
        margin-top: 5px;
        color: #666;
        font-size: 14px;
    }

    .form-actions {
        text-align: center;
        margin-top: 30px;
    }

    .btn {
        padding: 12px 30px;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        margin: 0 10px;
        transition: background-color 0.3s;
    }

    .btn-primary {
        background-color: #007bff;
        color: white;
    }

    .btn-primary:hover {
        background-color: #0056b3;
    }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background-color: #545b62;
    }

    .error-box {
        background-color: #f8d7da;
        color: #721c24;
        padding: 15px;
        border: 1px solid #f5c6cb;
        border-radius: 4px;
        margin: 20px 0;
    }

    .error-box ul {
        margin: 10px 0 0 0;
        padding-left: 20px;
    }

    .success-box {
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        border: 1px solid #c3e6cb;
        border-radius: 4px;
        margin: 20px 0;
    }

    @media (max-width: 768px) {
        .form-actions {
            text-align: stretch;
        }
        
        .btn {
            display: block;
            width: 100%;
            margin: 5px 0;
        }
    }
</style>
